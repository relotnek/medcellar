# requiresafe-sdk

[![Build Status](https://travis-ci.org/liftsecurity/requiresafe-sdk.svg?branch=master)](https://travis-ci.org/liftsecurity/requiresafe-sdk)

An SDK for easily interacting with the RequireSafe API from JavaScript.

The SDK works both on the server and in a browser with browserify.


## install

```
npm install requiresafe-sdk
```

## example

```javascript
var RequireSafe = require('requiresafe-sdk');
var package = require('./package.json');

var api = new RequireSafe({authToken: "XYZ"});

api.checkDependencies(package, function (err, result) {
    if (err) {
        // handle error
    } else {
        // got a result
        console.log(result); 
        //  =>
        //  {
        //      modules: [
        //          {name: 'marked', version: '4.0.7', status: 'clean', advisories: []},
        //          {name: 'request', version: '2.1.2', status: 'warning', advisories: [{
        //              type: 'usageWarning',
        //              description: 'Be sure to hold on to your cookie jar.'
        //          }]},
        //          { ... },
        //          { ... }
        //      ],
        //      exposureLevel: 'low',
        //      message: '`request@v2.1.2` has a usage related advisory. See NSP URL: http:..'
        //  }
    }
});
```

## Understanding the API callbacks

Each API call that requires an HTTP request will take a `callback` argument as the last argment. Whenever you see `apiCallback` below, this is what is being referred to.

The `apiCallback` callback will always follow the [error first](https://docs.nodejitsu.com/articles/errors/what-are-the-error-conventions) pattern, popularized by node.js:

If the first argument to the callback is an object, there was an error. If it's `null` the API call completed successfully and the second argument can be trusted to contain the result from the API.


## API reference

### Initializing `new SDK([optionsObject])`

You create an instance of the SDK by using `new` and optionally passing in an options object.

```javascript
var SDK = require('requiresafe-sdk');

var api  = new SDK({authToken: "SOME TOKEN"});
```

* `optionsObject` {Object} [optional]: An object with the following keys:
    * `authToken` {String}: an authentication token

### checkDependencies `.checkDependencies(packageObject, apiCallback)`

* `packageObject` {Object}: The JS object that package.json becomes when `JSON.parse()`'ed. Either pass the entire object, or just the `dependencies` object portion which is just a simple hash. The `key` is the package name, the `value` is the [semver](http://semver.org/) version numbrer.
* `apiCallback` {Function}: If successful the second argument will contain an object that looks as follows:


## license

MIT

